# 无人小车室内外避障

​       上周阿木实验室进行了无人小车的一系列室内测试实验。这期我们分享关于VFH避障算法在小车上测试过程。 

<video src="C:\Users\A\Desktop\ec7f109c5c7c5281009ef5d5b33b5ef6.mp4"></video>

​          之前阿木实验室已经做了一期关于VFH避障算法的详细概述，本期简单概括一下。VFH避障算法是是一种由人工势场法改进而来的机器人导航算法，是属于局部路径规划范畴之中。他是利用了激光雷达具有扫描精度高的优点，来获取机器人周围环境信息。算法会计算各个方向的行进重叠，根据距离，权重不同，该方向的障碍越多，距离越近，该方向的重叠值就越大。

​          根据不同方向的行进重叠，可以直观的用一个柱状图表示。横坐标为0-360度的方向，纵轴坐标是该角度下的行进叠加。柱状图超越，表示向该方向行进的重叠取代，也表明越不可能通过。理论上，这个柱状图低的区域是合理行进的，但可能会改变目标方向。因此，需要一个平衡函数来平衡目标方向。最终，会选择一个相对最方便的方向行进。于是这个函数便是整个算法的核心。

![image-20200811162921440](C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20200811162921440.png)

​                                                                             极坐标直方图 

它执行过程中针对移动机器人的周围环境创建了一个基于极坐标表示的局部地图，这个局部使用布局图的表示方法，会被最近的一些传感器数据所更新。VFH算法产生的极坐标直方图上图所示。

## 小车VFH室内避障

​       当前小车搭载的硬件系统为NUV-X86板载计算机，Intel T265摄像头，Intel D435I 摄像头，思岚激光雷达A2,WIFI 数传，pixhawk飞控。小车所使用的为APM固件，定位方式采用T265定位。下图为小车的实物图。

![img](file:///C:/Users/A/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)

​                                                                               小车正面图

​       在进行室内测试之前，我们需要按照[阿木实验室小车WIKI 使用文档](https://www.amovlab.com/document)进行一些实验前准备工作。

首先进行了航点任务测试。

​       我们在Mission Planner上设置了小车的Home点，由于小车在室内是没有GPS数据的，其次对小车进行了航点规划，让小车执行Auto模式，小车就会按照所规划的航点进行运动。测试效果视频：





​      其次进行小车室内避障测试，由于室内范围较小，我们将激光雷达的扫描范围设置到了10-80cm以内，其次对小车的速度进行了限制。避障效果视频：



### 小车VFH室外避障

​    



​    













